<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3084px" preserveAspectRatio="none" style="width:1394px;height:3084px;" version="1.1" viewBox="0 0 1394 3084" width="1394px" zoomAndPan="magnify"><defs><filter height="300%" id="f1x4n657c0qxca" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="386" x="505.5" y="47.0703">Quoting Service Sequences</text><rect fill="#FFFFFF" filter="url(#f1x4n657c0qxca)" height="2384.7109" style="stroke: #000000; stroke-width: 4.0;" width="1345" x="26" y="518.3906"/><rect fill="#FFFFFF" filter="url(#f1x4n657c0qxca)" height="1700.5898" style="stroke: #000000; stroke-width: 4.0;" width="1100" x="46" y="962.7383"/><rect fill="#FFFFFF" filter="url(#f1x4n657c0qxca)" height="851.2266" style="stroke: #000000; stroke-width: 4.0;" width="1060" x="66" y="1291.8438"/><rect fill="#FFFFFF" height="365.6367" style="stroke: none; stroke-width: 2.0;" width="1060" x="66" y="1777.4336"/><rect fill="#FFFFFF" height="506.2578" style="stroke: none; stroke-width: 2.0;" width="1100" x="46" y="2157.0703"/><rect fill="#FFFFFF" height="225.7734" style="stroke: none; stroke-width: 2.0;" width="1345" x="26" y="2677.3281"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="244" x2="244" y1="203.9063" y2="2937.1016"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="627" x2="627" y1="203.9063" y2="2937.1016"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1010" x2="1010" y1="203.9063" y2="2937.1016"/><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="60.9766" style="stroke: #A80036; stroke-width: 3.0;" width="178" x="152" y="132.9297"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="150" x="166" y="174">Payer DFSP</text><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="60.9766" style="stroke: #A80036; stroke-width: 3.0;" width="178" x="152" y="2935.1016"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="150" x="166" y="2976.1719">Payer DFSP</text><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="126.9297" style="stroke: #A80036; stroke-width: 3.0;" width="140" x="553" y="66.9766"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="88" x="579" y="108.0469">Switch</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="112" x="567" y="141.0234">Quoting</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="96" x="575" y="174">Service</text><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="126.9297" style="stroke: #A80036; stroke-width: 3.0;" width="140" x="553" y="2935.1016"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="88" x="579" y="2976.1719">Switch</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="112" x="567" y="3009.1484">Quoting</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="96" x="575" y="3042.125">Service</text><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="60.9766" style="stroke: #A80036; stroke-width: 3.0;" width="182" x="916" y="132.9297"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="154" x="930" y="174">Payee DFSP</text><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="60.9766" style="stroke: #A80036; stroke-width: 3.0;" width="182" x="916" y="2935.1016"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="154" x="930" y="2976.1719">Payee DFSP</text><path d="M136,233.9063 L136,283.9063 L726,283.9063 L726,253.9063 L706,233.9063 L136,233.9063 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M706,233.9063 L706,253.9063 L726,253.9063 L706,233.9063 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="548" x="148" y="269.043">Payer DFSP requests quote from Payee DFSP</text><polygon fill="#A80036" points="603,337.1484,623,345.1484,603,345.1484" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="245" x2="625" y1="345.1484" y2="345.1484"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="259" y="335.6641">1</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="172" x="285" y="335.6641">POST /quotes</text><polygon fill="#A80036" points="267,405.7695,247,405.7695,267,413.7695" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="245" x2="625" y1="403.7695" y2="403.7695"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="279" y="394.2852">2</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="172" x="305" y="394.2852">202 Accepted</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="627" x2="711" y1="462.3906" y2="462.3906"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="711" x2="711" y1="462.3906" y2="488.3906"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="629" x2="711" y1="488.3906" y2="488.3906"/><polygon fill="#A80036" points="649,480.3906,629,488.3906,649,496.3906,641,488.3906" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="641" y="452.9063">3</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="292" x="667" y="452.9063">Validate Quote Request</text><path d="M26,518.3906 L150,518.3906 L150,532.3906 L130,552.3906 L26,552.3906 L26,518.3906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="none" height="2384.7109" style="stroke: #000000; stroke-width: 4.0;" width="1345" x="26" y="518.3906"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="56" y="545.5273">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="180" y="543.6602">[quote is valid]</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="627" x2="711" y1="595.6328" y2="595.6328"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="711" x2="711" y1="595.6328" y2="621.6328"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="629" x2="711" y1="621.6328" y2="621.6328"/><polygon fill="#A80036" points="649,613.6328,629,621.6328,649,629.6328,641,621.6328" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="641" y="586.1484">4</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="234" x="667" y="586.1484">Persist Quote Data</text><path d="M512,647.6328 L512,727.6328 L1118,727.6328 L1118,667.6328 L1098,647.6328 L512,647.6328 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1098,647.6328 L1098,667.6328 L1118,667.6328 L1098,647.6328 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="564" x="524" y="682.7695">Switch forwards quote request to Payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="264" x="524" y="713.3906">&lt;Payer based Rules&gt;</text><polygon fill="#A80036" points="987,781.4961,1007,789.4961,987,789.4961" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="627" x2="1009" y1="789.4961" y2="789.4961"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="641" y="780.0117">5</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="172" x="667" y="780.0117">POST /quotes</text><polygon fill="#A80036" points="649,850.1172,629,850.1172,649,858.1172" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="627" x2="1009" y1="848.1172" y2="848.1172"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="661" y="838.6328">6</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="172" x="687" y="838.6328">202 Accepted</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1011" x2="1095" y1="906.7383" y2="906.7383"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1095" x2="1095" y1="906.7383" y2="932.7383"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1013" x2="1095" y1="932.7383" y2="932.7383"/><polygon fill="#A80036" points="1033,924.7383,1013,932.7383,1033,940.7383,1025,932.7383" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1025" y="897.2539">7</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="296" x="1051" y="897.2539">Calculate Fees/Charges</text><path d="M46,962.7383 L170,962.7383 L170,976.7383 L150,996.7383 L46,996.7383 L46,962.7383 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="none" height="1700.5898" style="stroke: #000000; stroke-width: 4.0;" width="1100" x="46" y="962.7383"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="76" y="989.875">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="476" x="200" y="988.0078">[Payee DFSP successfully calculates quote]</text><path d="M546,1007.3594 L546,1057.3594 L1088,1057.3594 L1088,1027.3594 L1068,1007.3594 L546,1007.3594 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1068,1007.3594 L1068,1027.3594 L1088,1027.3594 L1068,1007.3594 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="480" x="564.5" y="1042.4961">Payee DFSP responds to quote request</text><polygon fill="#A80036" points="649,1110.6016,629,1118.6016,649,1118.6016" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="627" x2="1009" y1="1118.6016" y2="1118.6016"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="661" y="1109.1172">8</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="214" x="687" y="1109.1172">PUT /quotes/{ID}</text><polygon fill="#A80036" points="987,1179.2227,1007,1179.2227,987,1187.2227" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="627" x2="1009" y1="1177.2227" y2="1177.2227"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="641" y="1167.7383">9</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="172" x="667" y="1167.7383">202 Accepted</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="627" x2="711" y1="1235.8438" y2="1235.8438"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="711" x2="711" y1="1235.8438" y2="1261.8438"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="629" x2="711" y1="1261.8438" y2="1261.8438"/><polygon fill="#A80036" points="649,1253.8438,629,1261.8438,649,1269.8438,641,1261.8438" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="641" y="1226.3594">10</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="312" x="685" y="1226.3594">Validate Quote Response</text><path d="M66,1291.8438 L190,1291.8438 L190,1305.8438 L170,1325.8438 L66,1325.8438 L66,1291.8438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="none" height="851.2266" style="stroke: #000000; stroke-width: 4.0;" width="1060" x="66" y="1291.8438"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="96" y="1318.9805">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="220" y="1317.1133">[response is ok]</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="627" x2="711" y1="1369.0859" y2="1369.0859"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="711" x2="711" y1="1369.0859" y2="1395.0859"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="629" x2="711" y1="1395.0859" y2="1395.0859"/><polygon fill="#A80036" points="649,1387.0859,629,1395.0859,649,1403.0859,641,1395.0859" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="641" y="1359.6016">11</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="278" x="685" y="1359.6016">Persist Response Data</text><path d="M120,1421.0859 L120,1501.0859 L742,1501.0859 L742,1441.0859 L722,1421.0859 L120,1421.0859 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M722,1421.0859 L722,1441.0859 L742,1441.0859 L722,1421.0859 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="580" x="132" y="1456.2227">Switch forwards quote response to Payer DFSP</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="356" x="132" y="1486.8438">&lt;Payee whole request Rule&gt;</text><polygon fill="#A80036" points="267,1554.9492,247,1562.9492,267,1562.9492" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="245" x2="625" y1="1562.9492" y2="1562.9492"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="279" y="1553.4648">12</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="214" x="323" y="1553.4648">PUT /quotes/{ID}</text><polygon fill="#A80036" points="603,1623.5703,623,1623.5703,603,1631.5703" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="245" x2="625" y1="1621.5703" y2="1621.5703"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="259" y="1612.0859">13</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="172" x="303" y="1612.0859">202 Accepted</text><path d="M86,1647.5703 L86,1757.5703 L396,1757.5703 L396,1667.5703 L376,1647.5703 L86,1647.5703 " fill="#3498DB" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M376,1647.5703 L376,1667.5703 L396,1667.5703 L376,1647.5703 " fill="#3498DB" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="268" x="98" y="1682.707">Payer DFSP continues</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="266" x="98" y="1713.3281">with transfer if quote</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="188" x="98" y="1743.9492">is acceptable...</text><line style="stroke: #000000; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="66" x2="1126" y1="1779.4336" y2="1779.4336"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202" x="76" y="1800.7031">[response invalid]</text><path d="M546,1817.3438 L546,1867.3438 L1088,1867.3438 L1088,1837.3438 L1068,1817.3438 L546,1817.3438 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1068,1817.3438 L1068,1837.3438 L1088,1837.3438 L1068,1817.3438 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="430" x="589.5" y="1852.4805">Switch returns error to Payee DFSP</text><polygon fill="#A80036" points="987,1920.5859,1007,1928.5859,987,1928.5859" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="627" x2="1009" y1="1928.5859" y2="1928.5859"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="641" y="1919.1016">14</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="288" x="685" y="1919.1016">PUT /quotes/{ID}/error</text><polygon fill="#A80036" points="649,1989.207,629,1989.207,649,1997.207" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="627" x2="1009" y1="1987.207" y2="1987.207"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="661" y="1977.7227">15</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="172" x="705" y="1977.7227">202 Accepted</text><path d="M546,2013.207 L546,2123.207 L1088,2123.207 L1088,2033.207 L1068,2013.207 L546,2013.207 " fill="#EC7063" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1068,2013.207 L1068,2033.207 L1088,2033.207 L1068,2013.207 " fill="#EC7063" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="254" x="633.5" y="2048.3438">Note that under this</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="298" x="633.5" y="2078.9648">scenario the Payer DFSP</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="342" x="633.5" y="2109.5859">may not receive a response</text><line style="stroke: #000000; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="46" x2="1146" y1="2159.0703" y2="2159.0703"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="576" x="56" y="2180.3398">[Payee DFSP calculation fails or rejects the request]</text><path d="M546,2196.9805 L546,2246.9805 L1088,2246.9805 L1088,2216.9805 L1068,2196.9805 L546,2196.9805 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1068,2196.9805 L1068,2216.9805 L1088,2216.9805 L1068,2196.9805 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="430" x="589.5" y="2232.1172">Payee DFSP returns error to Switch</text><polygon fill="#A80036" points="649,2300.2227,629,2308.2227,649,2308.2227" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="627" x2="1009" y1="2308.2227" y2="2308.2227"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="661" y="2298.7383">16</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="290" x="705" y="2298.7383">POST quotes/{ID}/error</text><polygon fill="#A80036" points="987,2368.8438,1007,2368.8438,987,2376.8438" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="627" x2="1009" y1="2366.8438" y2="2366.8438"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="641" y="2357.3594">17</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="172" x="685" y="2357.3594">202 Accepted</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="627" x2="711" y1="2425.4648" y2="2425.4648"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="711" x2="711" y1="2425.4648" y2="2451.4648"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="629" x2="711" y1="2451.4648" y2="2451.4648"/><polygon fill="#A80036" points="649,2443.4648,629,2451.4648,649,2459.4648,641,2451.4648" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="641" y="2415.9805">18</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="214" x="685" y="2415.9805">Persist error data</text><path d="M166,2477.4648 L166,2527.4648 L704,2527.4648 L704,2497.4648 L684,2477.4648 L166,2477.4648 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M684,2477.4648 L684,2497.4648 L704,2497.4648 L684,2477.4648 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="426" x="209.5" y="2512.6016">Switch returns error to Payer DFSP</text><polygon fill="#A80036" points="267,2580.707,247,2588.707,267,2588.707" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="245" x2="625" y1="2588.707" y2="2588.707"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="279" y="2579.2227">19</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="290" x="323" y="2579.2227">POST quotes/{ID}/error</text><polygon fill="#A80036" points="603,2649.3281,623,2649.3281,603,2657.3281" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="245" x2="625" y1="2647.3281" y2="2647.3281"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="259" y="2637.8438">20</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="172" x="303" y="2637.8438">202 Accepted</text><line style="stroke: #000000; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="26" x2="1371" y1="2679.3281" y2="2679.3281"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="164" x="36" y="2700.5977">[quote invalid]</text><path d="M166,2717.2383 L166,2767.2383 L704,2767.2383 L704,2737.2383 L684,2717.2383 L166,2717.2383 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M684,2717.2383 L684,2737.2383 L704,2737.2383 L684,2717.2383 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="426" x="209.5" y="2752.375">Switch returns error to Payer DFSP</text><polygon fill="#A80036" points="267,2820.4805,247,2828.4805,267,2828.4805" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="245" x2="625" y1="2828.4805" y2="2828.4805"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="279" y="2818.9961">21</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="290" x="323" y="2818.9961">POST quotes/{ID}/error</text><polygon fill="#A80036" points="603,2889.1016,623,2889.1016,603,2897.1016" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="245" x2="625" y1="2887.1016" y2="2887.1016"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="259" y="2877.6172">22</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="172" x="303" y="2877.6172">202 Accepted</text><!--
@startuml
Title Quoting Service Sequences
participant "Payer DFSP"
participant "Switch\nQuoting\nService" as Switch
participant "Payee DFSP"

autonumber
note over "Payer DFSP", Switch: Payer DFSP requests quote from Payee DFSP
"Payer DFSP" -\ Switch: POST /quotes
Switch - -/ "Payer DFSP": 202 Accepted
Switch -> Switch: Validate Quote Request
alt quote is valid
    Switch -> Switch: Persist Quote Data
    note over Switch, "Payee DFSP": Switch forwards quote request to Payee DFSP\n<Payer based Rules> 
    Switch -\ "Payee DFSP": POST /quotes
    "Payee DFSP" - -/ Switch: 202 Accepted
    "Payee DFSP" -> "Payee DFSP": Calculate Fees/Charges
    
    alt Payee DFSP successfully calculates quote
    
        note over "Payee DFSP", Switch: Payee DFSP responds to quote request
        "Payee DFSP" -\ Switch: PUT /quotes/{ID}
        Switch - -/ "Payee DFSP": 202 Accepted
        
        Switch -> Switch: Validate Quote Response
        
        alt response is ok
        
            Switch -> Switch: Persist Response Data
            
            note over Switch, "Payer DFSP": Switch forwards quote response to Payer DFSP\n<Payee \ whole request Rule>
            
            Switch -\ "Payer DFSP": PUT /quotes/{ID}
            "Payer DFSP" - -/ Switch: 202 Accepted
            
            note over "Payer DFSP" #3498db: Payer DFSP continues\nwith transfer if quote\nis acceptable...
        else response invalid
        
            note over Switch, "Payee DFSP": Switch returns error to Payee DFSP
        
            Switch -\ "Payee DFSP": PUT /quotes/{ID}/error
            "Payee DFSP" - -/ Switch : 202 Accepted
            
            note over Switch, "Payee DFSP" #ec7063: Note that under this\nscenario the Payer DFSP\nmay not receive a response
        
        end
    else Payee DFSP calculation fails or rejects the request
    
        note over "Payee DFSP", Switch: Payee DFSP returns error to Switch
    
        "Payee DFSP" -\ Switch: POST quotes/{ID}/error
        Switch - -/ "Payee DFSP": 202 Accepted
        Switch -> Switch: Persist error data
        
        note over "Payer DFSP", Switch: Switch returns error to Payer DFSP
        
        Switch -\ "Payer DFSP": POST quotes/{ID}/error
        "Payer DFSP" - -/ Switch: 202 Accepted
    
    end
else quote invalid
    note over "Payer DFSP", Switch: Switch returns error to Payer DFSP
    Switch -\ "Payer DFSP": POST quotes/{ID}/error
    "Payer DFSP" - -/ Switch: 202 Accepted
end
@enduml

PlantUML version 1.2019.05(Sat Apr 20 18:45:36 SAST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b28
Operating System: Mac OS X
OS Version: 10.14.4
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>